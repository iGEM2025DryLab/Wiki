---
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/Navigation.astro';
import '../../styles/global.css';
---

<Layout title="Wet Lab - Lychee Guardians">
  <Navigation />
  
  <!-- Side Scroll DNA Navigation -->
  <div id="wetlab-dna-nav" class="fixed left-6 top-1/2 transform -translate-y-1/2 z-40 opacity-0 transition-opacity duration-500 w-20 lg:block hidden">
    <div id="dna-nav-container">
      <!-- DNA SVG and probes will be generated by JavaScript -->
    </div>
  </div>
  
  <!-- Hero Section -->
  <section id="wet-lab-intro" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-leaf-50 to-leaf-100 pt-20">
    <div class="container text-center">
      <h1 class="font-display text-h1 text-ink-900 mb-6">
        Wet Lab Mission
      </h1>
      <p class="text-xl text-ink-700 max-w-3xl mx-auto mb-8">
        Welcome to the heart of our biological engineering efforts. Here, we manipulate microorganisms to create novel solutions for lychee preservation.
      </p>
      <div class="w-32 h-32 bg-leaf-200 rounded-full flex items-center justify-center mx-auto">
        <span class="text-6xl">üß¨</span>
      </div>
    </div>
  </section>

  <!-- Methodology Section -->
  <section id="wet-lab-method" class="py-24 bg-white">
    <div class="container">
      <h2 class="font-display text-h1 text-ink-900 mb-4 text-center">
        Methodology
      </h2>
      <p class="text-xl text-ink-700 max-w-3xl mx-auto mb-12 text-center">
        Our approach involves gene cloning, protein expression, and metabolic engineering to produce a blend of natural preservatives.
      </p>
      
      <div class="grid md:grid-cols-2 gap-8">
        <div class="card hover:shadow-pop transition-shadow duration-300">
          <h3 class="font-display text-xl font-semibold mb-4 text-leaf-500">
            Microbial Engineering
          </h3>
          <p class="text-ink-700 mb-4">
            Engineering E. coli and yeast systems to express preservative compounds including natural antioxidants and antimicrobial peptides.
          </p>
        </div>
        
        <div class="card hover:shadow-pop transition-shadow duration-300">
          <h3 class="font-display text-xl font-semibold mb-4 text-leaf-500">
            Gene Cloning
          </h3>
          <p class="text-ink-700 mb-4">
            Cloning genes encoding for natural preservatives from various organisms into suitable expression vectors.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Protocols Section -->
  <section id="wet-lab-protocols" class="py-24 bg-leaf-50">
    <div class="container">
      <h2 class="font-display text-h1 text-ink-900 mb-4 text-center">
        Protocols
      </h2>
      <p class="text-xl text-ink-700 max-w-3xl mx-auto mb-12 text-center">
        Detailed step-by-step procedures for our experiments, from plasmid construction to microbial fermentation.
      </p>
      
      <div class="grid md:grid-cols-3 gap-6">
        <div class="card">
          <h4 class="font-display text-lg font-semibold mb-3 text-leaf-600">
            Transformation
          </h4>
          <p class="text-ink-700 text-sm">
            Standard protocols for bacterial and yeast transformation with optimized conditions.
          </p>
        </div>
        
        <div class="card">
          <h4 class="font-display text-lg font-semibold mb-3 text-leaf-600">
            Expression Analysis
          </h4>
          <p class="text-ink-700 text-sm">
            SDS-PAGE and Western blot protocols for protein expression verification.
          </p>
        </div>
        
        <div class="card">
          <h4 class="font-display text-lg font-semibold mb-3 text-leaf-600">
            Purification
          </h4>
          <p class="text-ink-700 text-sm">
            His-tag and native purification methods for isolating target compounds.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Results Section -->
  <section id="wet-lab-results" class="py-24 bg-white">
    <div class="container">
      <h2 class="font-display text-h1 text-ink-900 mb-4 text-center">
        Results
      </h2>
      <p class="text-xl text-ink-700 max-w-3xl mx-auto mb-12 text-center">
        Initial findings are promising. Our engineered strains have demonstrated the ability to inhibit key spoilage pathways in controlled environments.
      </p>
      
      <div class="grid md:grid-cols-2 gap-8">
        <div class="card card--accent">
          <h3 class="font-display text-xl font-semibold mb-4 text-leaf-500">
            Expression Success
          </h3>
          <p class="text-ink-700 mb-4">
            Successfully expressed target preservative compounds with yields of 15-25% of total cellular protein.
          </p>
          <div class="bg-leaf-50 p-4 rounded-lg">
            <p class="text-sm text-leaf-600">
              ‚Ä¢ Confirmed by SDS-PAGE analysis
              <br>‚Ä¢ Western blot validation completed
              <br>‚Ä¢ Activity assays show 80% preservation efficacy
            </p>
          </div>
        </div>
        
        <div class="card card--accent">
          <h3 class="font-display text-xl font-semibold mb-4 text-leaf-500">
            Lychee Testing
          </h3>
          <p class="text-ink-700 mb-4">
            Preliminary tests on fresh lychees show extended freshness period from 2-3 days to 7-8 days.
          </p>
          <div class="bg-leaf-50 p-4 rounded-lg">
            <p class="text-sm text-leaf-600">
              ‚Ä¢ 3x longer shelf life achieved
              <br>‚Ä¢ Maintained texture and flavor
              <br>‚Ä¢ No visible browning or spoilage
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Safety Section -->
  <section id="wet-lab-safety" class="py-24 bg-leaf-50">
    <div class="container">
      <h2 class="font-display text-h1 text-ink-900 mb-4 text-center">
        Safety
      </h2>
      <p class="text-xl text-ink-700 max-w-3xl mx-auto mb-12 text-center">
        Ensuring the safety of our team and the environment is paramount. All procedures adhere to strict biosafety protocols.
      </p>
      
      <div class="max-w-4xl mx-auto">
        <div class="card">
          <div class="grid md:grid-cols-3 gap-6">
            <div class="text-center">
              <div class="w-16 h-16 bg-leaf-100 rounded-full flex items-center justify-center mx-auto mb-4">
                üõ°Ô∏è
              </div>
              <h4 class="font-display font-semibold mb-2">Biosafety Level 1</h4>
              <p class="text-sm text-ink-600">All work conducted in BSL-1 certified facilities</p>
            </div>
            
            <div class="text-center">
              <div class="w-16 h-16 bg-leaf-100 rounded-full flex items-center justify-center mx-auto mb-4">
                üß§
              </div>
              <h4 class="font-display font-semibold mb-2">PPE Protocol</h4>
              <p class="text-sm text-ink-600">Mandatory lab coats, gloves, and safety glasses</p>
            </div>
            
            <div class="text-center">
              <div class="w-16 h-16 bg-leaf-100 rounded-full flex items-center justify-center mx-auto mb-4">
                ‚ôªÔ∏è
              </div>
              <h4 class="font-display font-semibold mb-2">Waste Management</h4>
              <p class="text-sm text-ink-600">Proper disposal and decontamination procedures</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contributions Section -->
  <section id="wet-lab-contributions" class="py-24 bg-white">
    <div class="container">
      <h2 class="font-display text-h1 text-ink-900 mb-4 text-center">
        Contributions
      </h2>
      <p class="text-xl text-ink-700 max-w-3xl mx-auto mb-12 text-center">
        This project is a collaborative effort. Here we detail the contributions of each team member to the wet lab work.
      </p>
      
      <div class="grid md:grid-cols-2 gap-8">
        <div class="card">
          <h3 class="font-display text-lg font-semibold mb-3 text-leaf-500">
            Laboratory Work
          </h3>
          <p class="text-ink-700 text-sm mb-3">
            Team members conducted experiments, optimized protocols, and analyzed results through collaborative efforts.
          </p>
          <ul class="text-sm text-ink-600 space-y-1">
            <li>‚Ä¢ Plasmid construction and cloning</li>
            <li>‚Ä¢ Protein expression optimization</li>
            <li>‚Ä¢ Purification protocol development</li>
          </ul>
        </div>
        
        <div class="card">
          <h3 class="font-display text-lg font-semibold mb-3 text-leaf-500">
            Data Analysis
          </h3>
          <p class="text-ink-700 text-sm mb-3">
            Comprehensive analysis of experimental data and validation of preservation efficacy.
          </p>
          <ul class="text-sm text-ink-600 space-y-1">
            <li>‚Ä¢ Statistical analysis of results</li>
            <li>‚Ä¢ Quality control testing</li>
            <li>‚Ä¢ Shelf-life assessment</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Discussion Section -->
  <section id="wet-lab-discussion" class="py-24 bg-leaf-50">
    <div class="container">
      <h2 class="font-display text-h1 text-ink-900 mb-4 text-center">
        Discussion & Future Work
      </h2>
      <p class="text-xl text-ink-700 max-w-3xl mx-auto mb-12 text-center">
        We are currently optimizing production yields and planning for in-situ application tests on fresh lychees. The next phase will focus on scaling up.
      </p>
      
      <div class="max-w-4xl mx-auto">
        <div class="card card--accent">
          <div class="grid md:grid-cols-2 gap-8">
            <div>
              <h3 class="font-display text-xl font-semibold mb-4 text-leaf-500">
                Current Challenges
              </h3>
              <ul class="text-ink-700 space-y-2">
                <li>‚Ä¢ Optimizing expression yields</li>
                <li>‚Ä¢ Scale-up considerations</li>
                <li>‚Ä¢ Cost-effective production</li>
                <li>‚Ä¢ Long-term stability testing</li>
              </ul>
            </div>
            
            <div>
              <h3 class="font-display text-xl font-semibold mb-4 text-leaf-500">
                Next Steps
              </h3>
              <ul class="text-ink-700 space-y-2">
                <li>‚Ä¢ Large-scale fermentation</li>
                <li>‚Ä¢ Field testing with lychee farmers</li>
                <li>‚Ä¢ Regulatory compliance studies</li>
                <li>‚Ä¢ Commercialization pathway</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Footer Navigation -->
  <section class="py-12 bg-white">
    <div class="container text-center">
      <h3 class="font-display text-xl font-semibold mb-6">Explore More</h3>
      <div class="flex flex-wrap justify-center gap-4">
        <a href="/drylab/" class="btn btn-outline">
          Dry Lab Research ‚Üí
        </a>
        <a href="/project/" class="btn btn-outline">
          Project Overview ‚Üí
        </a>
        <a href="/results/" class="btn btn-outline">
          View Results ‚Üí
        </a>
      </div>
    </div>
  </section>

<style>
  /* DNA Navigation Styles */
  #wetlab-dna-nav {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 10px;
    padding: 10px;
  }
  
  #wetlab-dna-nav.visible {
    opacity: 1 !important;
  }

  .dna-probe {
    cursor: pointer;
    transition: transform 0.3s ease-in-out;
  }
  
  .dna-probe:hover {
    transform: scale(1.3);
  }
  
  .dna-probe .probe-head {
    transition: all 0.3s ease-in-out;
  }
  
  .dna-probe:hover .probe-head,
  .dna-probe.hover-state .probe-head {
    fill: #4CAF50 !important;
    stroke: #3F9D44 !important;
    transform: scale(1.2);
    r: 7;
  }
  
  .dna-probe:hover,
  .dna-probe.hover-state {
    transform: scale(1.3);
  }
  
  .dna-probe.active .probe-head {
    fill: #4CAF50 !important;
    stroke: #3F9D44 !important;
    transform: scale(1.1);
  }

  .nav-dot-dna {
    position: relative;
  }

  .nav-dot-dna .tooltip {
    position: absolute;
    left: 80px;
    top: 50%;
    transform: translateY(-50%) translateX(-10px);
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 8px 14px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    white-space: nowrap;
    opacity: 0 !important;
    pointer-events: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1000;
    visibility: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }
  
  .nav-dot-dna .tooltip::before {
    content: '';
    position: absolute;
    left: -6px;
    top: 50%;
    transform: translateY(-50%);
    border: 6px solid transparent;
    border-right-color: rgba(0, 0, 0, 0.9);
  }
  
  .nav-dot-dna:hover .tooltip {
    opacity: 1 !important;
    visibility: visible;
    transform: translateY(-50%) translateX(0);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    console.log('Wet Lab Navigation Script Starting...');
    
    const navContainer = document.getElementById('wetlab-dna-nav');
    const dnaContainer = document.getElementById('dna-nav-container');
    
    if (!navContainer || !dnaContainer) {
      console.error('Navigation containers not found!');
      return;
    }

    // Show the navigation container immediately for debugging
    navContainer.style.opacity = '1';
    navContainer.classList.add('visible');
    
    const sectionData = [
      { id: 'wet-lab-intro', label: 'üß¨ Introduction', color: '#4CAF50' },
      { id: 'wet-lab-method', label: 'üî¨ Methodology', color: '#2196F3' },
      { id: 'wet-lab-protocols', label: 'üìã Protocols', color: '#FF9800' },
      { id: 'wet-lab-results', label: 'üìä Results', color: '#9C27B0' },
      { id: 'wet-lab-safety', label: 'üõ°Ô∏è Safety', color: '#F44336' },
      { id: 'wet-lab-contributions', label: 'üí° Contributions', color: '#607D8B' },
      { id: 'wet-lab-discussion', label: 'üí¨ Discussion', color: '#795548' }
    ];

    console.log('Section data:', sectionData);

    // Create simple navigation dots
    function createNavigation() {
      dnaContainer.innerHTML = ''; // Clear any existing content
      
      sectionData.forEach((section, index) => {
        const sectionElement = document.getElementById(section.id);
        if (!sectionElement) {
          console.warn(`Section ${section.id} not found`);
          return;
        }
        
        console.log(`Creating nav for section: ${section.id}`);
        
        // Create dot container
        const dotContainer = document.createElement('div');
        dotContainer.style.position = 'absolute';
        dotContainer.style.top = `${(index / (sectionData.length - 1)) * 100}%`;
        dotContainer.style.left = '0';
        dotContainer.style.transform = 'translateY(-50%)';
        dotContainer.style.cursor = 'pointer';
        dotContainer.style.padding = '10px';
        
        // Create dot
        const dot = document.createElement('div');
        dot.style.width = '12px';
        dot.style.height = '12px';
        dot.style.borderRadius = '50%';
        dot.style.backgroundColor = section.color;
        dot.style.border = '2px solid white';
        dot.style.transition = 'all 0.3s ease';
        dot.style.boxShadow = '0 2px 4px rgba(0,0,0,0.2)';
        
        // Create tooltip
        const tooltip = document.createElement('div');
        tooltip.textContent = section.label;
        tooltip.style.position = 'absolute';
        tooltip.style.left = '25px';
        tooltip.style.top = '50%';
        tooltip.style.transform = 'translateY(-50%)';
        tooltip.style.background = 'rgba(0,0,0,0.8)';
        tooltip.style.color = 'white';
        tooltip.style.padding = '6px 12px';
        tooltip.style.borderRadius = '6px';
        tooltip.style.fontSize = '12px';
        tooltip.style.whiteSpace = 'nowrap';
        tooltip.style.opacity = '0';
        tooltip.style.pointerEvents = 'none';
        tooltip.style.transition = 'opacity 0.2s ease';
        tooltip.style.zIndex = '1000';
        
        // Add hover events
        dotContainer.addEventListener('mouseenter', () => {
          dot.style.transform = 'scale(1.4)';
          dot.style.boxShadow = `0 0 15px ${section.color}`;
          tooltip.style.opacity = '1';
        });
        
        dotContainer.addEventListener('mouseleave', () => {
          dot.style.transform = 'scale(1)';
          dot.style.boxShadow = '0 2px 4px rgba(0,0,0,0.2)';
          tooltip.style.opacity = '0';
        });
        
        // Add click event
        dotContainer.addEventListener('click', () => {
          console.log(`Clicking to scroll to: ${section.id}`);
          sectionElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
        
        dotContainer.appendChild(dot);
        dotContainer.appendChild(tooltip);
        dnaContainer.appendChild(dotContainer);
      });
    }
    
    // Update active dot based on scroll
    function updateActiveSection() {
      const scrollY = window.pageYOffset + 100;
      let activeIndex = 0;
      
      sectionData.forEach((section, index) => {
        const element = document.getElementById(section.id);
        if (element && element.offsetTop <= scrollY) {
          activeIndex = index;
        }
      });
      
      // Update dot appearance
      const dots = dnaContainer.querySelectorAll('div > div:first-child');
      dots.forEach((dot, index) => {
        if (index === activeIndex) {
          dot.style.transform = 'scale(1.2)';
          dot.style.border = '3px solid white';
        } else {
          dot.style.transform = 'scale(1)';
          dot.style.border = '2px solid white';
        }
      });
    }
    
    // Scroll handler
    function handleScroll() {
      updateActiveSection();
      
      // Show/hide navigation based on scroll
      const scrollY = window.pageYOffset;
      if (scrollY > 100) {
        navContainer.style.opacity = '1';
        navContainer.classList.add('visible');
      } else {
        navContainer.style.opacity = '0.7';
      }
    }
    
    // Initialize
    createNavigation();
    updateActiveSection();
    
    // Add scroll listener
    window.addEventListener('scroll', handleScroll, { passive: true });
    
    console.log('Wet Lab Navigation Initialized Successfully!');
  });
  
  // Show navigation immediately since we don't have Hero component
  document.addEventListener('DOMContentLoaded', function() {
    const nav = document.getElementById('main-nav');
    if (nav) {
      // Remove hiding classes
      nav.classList.remove('-translate-y-full', 'opacity-0');
      nav.classList.add('translate-y-0', 'opacity-100');
      
      // Force visibility with inline styles as backup
      nav.style.transform = 'translateY(0)';
      nav.style.opacity = '1';
      nav.style.visibility = 'visible';
      nav.style.position = 'fixed';
      nav.style.top = '0';
      nav.style.left = '0';
      nav.style.right = '0';
      nav.style.zIndex = '50';
      nav.style.backgroundColor = 'rgba(255, 255, 255, 0.95)';
      nav.style.backdropFilter = 'blur(10px)';
      nav.style.borderBottom = '1px solid rgba(0, 0, 0, 0.1)';
      nav.style.padding = '1rem 0';
      
      console.log('Navigation forced to show');
      
      // Also ensure all navigation links are styled and clickable
      const navLinks = nav.querySelectorAll('a');
      navLinks.forEach(link => {
        link.style.color = '#2E2E38'; // ink-900 color
        link.style.textDecoration = 'none';
        link.style.padding = '0.5rem 1rem';
        link.style.borderRadius = '0.5rem';
        link.style.transition = 'all 0.3s ease';
        link.style.display = 'inline-block';
        
        // Add hover effects
        link.addEventListener('mouseenter', function() {
          this.style.backgroundColor = 'rgba(230, 57, 70, 0.1)';
          this.style.color = '#E63946'; // lychee-500
        });
        
        link.addEventListener('mouseleave', function() {
          this.style.backgroundColor = 'transparent';
          this.style.color = '#2E2E38';
        });
      });
    }
  });
</script>
</Layout>